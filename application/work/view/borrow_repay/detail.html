<div style="height: 100%;background-color: #fff;">
    <form class="layui-form layui-card" action="{:request()->url()}" data-auto="true" method="post" autocomplete="off">
        <div class="layui-card-body">
            <div class="layui-form-item">
                <label class="layui-form-label label-required">物品编码</label>
                <div style="width: 80%" class="layui-input-inline">
                    <input required type="text" autocomplete="off" name="code" value='' placeholder="请输入物品编码或扫码" class="layui-input">
                </div>
                <button class="layui-btn" type='submit'>查询</button>
            </div>
        </div>
    </form>
    {notempty name='vo'}
        <div class="layui-card-body">
    <!--         物品信息-->
            <div class="layui-form-item text-center">
                <div class="layui-input-inline">
                    物品名称：{$vo.name|default=""}
                </div>
                <div class="layui-input-inline">
                    物品编码：{$vo.code|default=""}
                </div>
                <div class="layui-input-inline">
                    物品编码：{$vo.c_name|default=""}
                </div>
            </div>
            <div class="layui-form-item text-center">
                <div class="layui-input-inline">
                    物品使用次数：{$vo.use_num|default=""}
                </div>
                <div class="layui-input-inline">
                    物品租借状态：
                    {eq name='vo.status' value='1'}<span class="layui-badge layui-bg-green margin-left-5">空闲</span>{/eq}
                    {eq name='vo.status' value='2'}<span class="layui-badge layui-bg-red margin-left-5">被借中</span>{/eq}
                </div>
            </div>
            <div class="hr-line-dashed"></div>
    <!--        租借信息-->
    <!--        租借-->
            {eq name='vo.status' value='1'}
            <form class="layui-form layui-card" action="{:url('BorrowRepay/lease')}" data-auto="true" method="post" autocomplete="off">
                <div class="layui-form-item">
                    <label class="layui-form-label label-required">请选择租借人</label>
                    <div class="layui-input-inline">
                        <select class="layui-select" required name="per_id" lay-search>
                            {foreach $vo.personnel as $per}
                            <option value="{$per.id}">{$per.name|default=''}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label label-required">开始时间</label>
                    <div class="layui-input-inline">
                        <input class="layui-input date_time1" name="start_time" value='{$vo.start_time|default=""}' type="text" class="layui-input" placeholder="请选择开始时间">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block">
                        <textarea class="layui-textarea" name="mark"></textarea>
                    </div>
                </div>
                <div class="layui-form-item text-center">
                    <input type="hidden" name="g_id" value="{$vo.id}">
                    <input type="hidden" name="g_name" value="{$vo.name}">
                    <input type="hidden" name="g_code" value="{$vo.code}">
                    <button class="layui-btn" type='submit'>租借</button>
                </div>
            </form>
            {/eq}
    <!--        归还-->
            {eq name='vo.status' value='2'}
                <form class="layui-form layui-card" action="{:url('BorrowRepay/lease_back')}" data-auto="true" method="post" autocomplete="off">
                    <div class="layui-form-item text-center">
                        <div class="layui-input-inline">
                            租借人：{$vo.borrow_repay.per_name|default=""}
                        </div>
                        <div class="layui-input-inline">
                            开始时间：{$vo.borrow_repay.start_time|default=""}
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label label-required">结束时间</label>
                        <div class="layui-input-inline">
                            <input class="layui-input date_time2" name="end_time" value='{$vo.end_time|default=""}' type="text" class="layui-input" placeholder="请选择结束时间">
                        </div>
                    </div>
                    <div class="layui-form-item text-center">
                        <input type="hidden" name="id" value="{$vo.borrow_repay.id}">
                        <input type="hidden" name="g_id" value="{$vo.id}">
                        <button class="layui-btn" type='submit'>归还</button>
                    </div>
                </form>
            {/eq}
        </div>
    {/notempty}
</div>
<script>
    window.form.render();
    setTimeout($('input').focus(),100);
    laydate.render({
        elem: '.date_time1'
        ,type: 'datetime'
        ,value: new Date()
    });
    laydate.render({
        elem: '.date_time2'
        ,type: 'datetime'
        ,value: new Date()
    });
</script>
